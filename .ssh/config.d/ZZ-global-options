# N.B. global options are defaults and need to come last

Host 192.168.*
    ControlMaster no

# This link broke :-(
#   http://www.torchbox.com/blog/ssh-tips-and-tricks-part-2
# but see:
#   https://presentations.nordisch.org/olddognewtricks/
Host *
    ControlMaster auto
    #ControlPersist 30
    ControlPath ~/.ssh/master-%r@%h:%p

    Protocol             2
    ServerAliveCountMax  5
    ServerAliveInterval  300

    # Leap 42.1 sshd rejects clients using only diffie-hellman-group-exchange-sha256
    # https://presentations.nordisch.org/olddognewtricks/ recommends this:
    KexAlgorithms curve25519-sha256@libssh.org,diffie-hellman-group-exchange-sha256

    HostKeyAlgorithms ssh-rsa-cert-v01@openssh.com,ssh-rsa-cert-v00@openssh.com,ssh-rsa
    Ciphers aes256-ctr,aes192-ctr,aes128-ctr
    MACs hmac-sha2-512-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-ripemd160-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-512,hmac-sha2-256,hmac-ripemd160,umac-128@openssh.com

